---
import { getCollection } from 'astro:content'
import BaseLayout from '../layouts/BaseLayout.astro'
import BlogCard from '../components/BlogCard.astro'

// Get all posts
const allPosts = await getCollection('blog')
const posts = allPosts
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
---

<BaseLayout title="Khoi Van" description="Personal blog about Android development, software engineering, and life in Saigon">
  <div class="mx-auto max-w-3xl px-4 py-12">
    <!-- Page title -->
    <h1 class="mb-2 text-3xl font-bold">Posts</h1>
    <p class="mb-12 text-gray-600 italic">All the articles I've posted.</p>

    <!-- Posts list -->
    <div>
      {posts.map((post) => (
        <BlogCard post={post} />
      ))}
    </div>
  </div>
</BaseLayout>